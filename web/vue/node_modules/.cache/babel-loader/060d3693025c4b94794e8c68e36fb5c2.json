{"remainingRequest":"/Users/adr/Library/Mobile Documents/com~apple~CloudDocs/gekko/web/vue/node_modules/thread-loader/dist/cjs.js!/Users/adr/Library/Mobile Documents/com~apple~CloudDocs/gekko/web/vue/node_modules/babel-loader/lib/index.js!/Users/adr/Library/Mobile Documents/com~apple~CloudDocs/gekko/web/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/adr/Library/Mobile Documents/com~apple~CloudDocs/gekko/web/vue/src/components/global/configbuilder/datasetpicker.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/adr/Library/Mobile Documents/com~apple~CloudDocs/gekko/web/vue/src/components/global/configbuilder/datasetpicker.vue","mtime":1569604667000},{"path":"/Users/adr/Library/Mobile Documents/com~apple~CloudDocs/gekko/web/vue/node_modules/cache-loader/dist/cjs.js","mtime":1569708698000},{"path":"/Users/adr/Library/Mobile Documents/com~apple~CloudDocs/gekko/web/vue/node_modules/thread-loader/dist/cjs.js","mtime":1569708698000},{"path":"/Users/adr/Library/Mobile Documents/com~apple~CloudDocs/gekko/web/vue/node_modules/babel-loader/lib/index.js","mtime":1529635966000},{"path":"/Users/adr/Library/Mobile Documents/com~apple~CloudDocs/gekko/web/vue/node_modules/vue-loader/lib/index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport _ from 'lodash';\nimport Vue from 'vue';\nimport { post } from '../../../tools/ajax';\nimport spinner from '../../global/blockSpinner.vue';\nimport dataset from '../../global/mixins/dataset';\nexport default {\n  components: {\n    spinner: spinner\n  },\n  data: function data() {\n    return {\n      setIndex: -1,\n      customTo: false,\n      customFrom: false,\n      rangeVisible: false,\n      set: false\n    };\n  },\n  mixins: [dataset],\n  methods: {\n    humanizeDuration: function humanizeDuration(n) {\n      return window.humanizeDuration(n, {\n        largest: 4\n      });\n    },\n    fmt: function fmt(mom) {\n      return mom.utc().format('YYYY-MM-DD HH:mm');\n    },\n    openRange: function openRange() {\n      if (this.setIndex === -1) return alert('Select a dataset to adjust range');\n      this.updateCustomRange();\n      this.rangeVisible = true;\n    },\n    updateCustomRange: function updateCustomRange() {\n      this.customTo = this.fmt(this.set.to);\n      this.customFrom = this.fmt(this.set.from);\n    },\n    emitSet: function emitSet(val) {\n      if (!val) return;\n      var set;\n      if (!this.customTo) set = val;else {\n        set = Vue.util.extend({}, val);\n        set.to = moment.utc(this.customTo, 'YYYY-MM-DD HH:mm').format();\n        set.from = moment.utc(this.customFrom, 'YYYY-MM-DD HH:mm').format();\n      }\n      this.$emit('dataset', set);\n    }\n  },\n  watch: {\n    setIndex: function setIndex() {\n      this.set = this.datasets[this.setIndex];\n      this.updateCustomRange();\n      this.emitSet(this.set);\n    },\n    customTo: function customTo() {\n      this.emitSet(this.set);\n    },\n    customFrom: function customFrom() {\n      this.emitSet(this.set);\n    }\n  }\n};",{"version":3,"sources":["datasetpicker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA,OAAA,CAAA,MAAA,QAAA;AACA,OAAA,GAAA,MAAA,KAAA;AAEA,SAAA,IAAA,QAAA,qBAAA;AACA,OAAA,OAAA,MAAA,+BAAA;AACA,OAAA,OAAA,MAAA,6BAAA;AAEA,eAAA;AACA,cAAA;AACA;AADA,GADA;AAIA,QAAA,gBAAA;AACA,WAAA;AACA,gBAAA,CAAA,CADA;AAEA,gBAAA,KAFA;AAGA,kBAAA,KAHA;AAIA,oBAAA,KAJA;AAKA,WAAA;AALA,KAAA;AAOA,GAZA;AAaA,UAAA,CAAA,OAAA,CAbA;AAcA,WAAA;AACA,sBAAA,0BAAA,CAAA,EAAA;AACA,aAAA,OAAA,gBAAA,CAAA,CAAA,EAAA;AAAA,iBAAA;AAAA,OAAA,CAAA;AACA,KAHA;AAIA,SAAA;AAAA,aAAA,IAAA,GAAA,GAAA,MAAA,CAAA,kBAAA,CAAA;AAAA,KAJA;AAKA,eAAA,qBAAA;AACA,UAAA,KAAA,QAAA,KAAA,CAAA,CAAA,EACA,OAAA,MAAA,kCAAA,CAAA;AAEA,WAAA,iBAAA;AAEA,WAAA,YAAA,GAAA,IAAA;AACA,KAZA;AAaA,uBAAA,6BAAA;AACA,WAAA,QAAA,GAAA,KAAA,GAAA,CAAA,KAAA,GAAA,CAAA,EAAA,CAAA;AACA,WAAA,UAAA,GAAA,KAAA,GAAA,CAAA,KAAA,GAAA,CAAA,IAAA,CAAA;AACA,KAhBA;AAiBA,aAAA,iBAAA,GAAA,EAAA;AACA,UAAA,CAAA,GAAA,EACA;AAEA,UAAA,GAAA;AAEA,UAAA,CAAA,KAAA,QAAA,EACA,MAAA,GAAA,CADA,KAEA;AACA,cAAA,IAAA,IAAA,CAAA,MAAA,CAAA,EAAA,EAAA,GAAA,CAAA;AACA,YAAA,EAAA,GAAA,OAAA,GAAA,CAAA,KAAA,QAAA,EAAA,kBAAA,EAAA,MAAA,EAAA;AACA,YAAA,IAAA,GAAA,OAAA,GAAA,CAAA,KAAA,UAAA,EAAA,kBAAA,EAAA,MAAA,EAAA;AACA;AAEA,WAAA,KAAA,CAAA,SAAA,EAAA,GAAA;AACA;AAhCA,GAdA;AAgDA,SAAA;AAEA,cAAA,oBAAA;AACA,WAAA,GAAA,GAAA,KAAA,QAAA,CAAA,KAAA,QAAA,CAAA;AAEA,WAAA,iBAAA;AAEA,WAAA,OAAA,CAAA,KAAA,GAAA;AACA,KARA;AAUA,cAAA,oBAAA;AAAA,WAAA,OAAA,CAAA,KAAA,GAAA;AAAA,KAVA;AAWA,gBAAA,sBAAA;AAAA,WAAA,OAAA,CAAA,KAAA,GAAA;AAAA;AAXA;AAhDA,CAAA","sourcesContent":["<template lang='pug'>\ndiv\n  h3 Select a dataset\n  .txt--center.my2(v-if='datasetScanstate === \"idle\"')\n    a.w100--s.btn--primary.scan-btn(href='#', v-on:click.prevent='scan') Scan available data\n  .txt--center.my2(v-if='datasetScanstate === \"scanning\"')\n    spinner\n  .my2(v-if='datasetScanstate === \"scanned\"')\n\n    div(v-if='datasets.length != 0')\n      table.full\n        thead\n          tr\n            th \n            th exchange\n            th currency\n            th asset\n            th from\n            th to\n            th duration\n        tbody\n          tr(v-for='(set, i) in datasets')\n            td.radio\n              input(type='radio', name='dataset', :value='i', v-model='setIndex', v-bind:id='set.id')\n            td \n              label(v-bind:for='set.id') {{ set.exchange }}\n            td \n              label(v-bind:for='set.id') {{ set.currency }}\n            td\n              label(v-bind:for='set.id') {{ set.asset }}\n            td \n              label(v-bind:for='set.id') {{ fmt(set.from) }}\n            td \n              label(v-bind:for='set.id') {{ fmt(set.to) }}\n            td\n              label(v-bind:for='set.id') {{ humanizeDuration(set.to.diff(set.from)) }}\n      a.btn--primary(href='#', v-on:click.prevent='openRange', v-if='!rangeVisible') Adjust range\n      template(v-if='rangeVisible')\n        div\n          label(for='customFrom') From:\n          input(v-model='customFrom')\n        div\n          label(for='customTo') To:\n          input(v-model='customTo')\n\n    em(v-else) No Data found \n      a(href='#/data/importer') Lets add some\n\n</template>\n\n<script>\n\nimport _ from 'lodash'\nimport Vue from 'vue'\n\nimport { post } from '../../../tools/ajax'\nimport spinner from '../../global/blockSpinner.vue'\nimport dataset from '../../global/mixins/dataset'\n\nexport default {\n  components: {\n    spinner\n  },\n  data: () => {\n    return {\n      setIndex: -1,\n      customTo: false,\n      customFrom: false,\n      rangeVisible: false,\n      set: false\n    };\n  },\n  mixins: [ dataset ],\n  methods: {\n    humanizeDuration: (n) => {\n      return window.humanizeDuration(n, {largest: 4});\n    },\n    fmt: mom => mom.utc().format('YYYY-MM-DD HH:mm'),\n    openRange: function() {\n      if(this.setIndex === -1)\n        return alert('Select a dataset to adjust range');\n\n      this.updateCustomRange();\n\n      this.rangeVisible = true;\n    },\n    updateCustomRange: function() {\n      this.customTo = this.fmt(this.set.to);\n      this.customFrom = this.fmt(this.set.from);\n    },\n    emitSet: function(val) {\n      if(!val)\n        return;\n\n      let set;\n\n      if(!this.customTo)\n        set = val;\n      else {\n        set = Vue.util.extend({}, val);\n        set.to = moment.utc(this.customTo, 'YYYY-MM-DD HH:mm').format();\n        set.from = moment.utc(this.customFrom, 'YYYY-MM-DD HH:mm').format();\n      }\n\n      this.$emit('dataset', set);\n    }\n  },\n  watch: {\n\n    setIndex: function() {\n      this.set = this.datasets[this.setIndex];\n\n      this.updateCustomRange();\n\n      this.emitSet(this.set);\n    },\n\n    customTo: function() { this.emitSet(this.set); },\n    customFrom: function() { this.emitSet(this.set); }\n  }\n}\n</script>\n<style>\ntd.radio {\n  width: 45px;\n}\ntd label{\n  display: inline;\n  font-size: 1em;\n}\n</style>"],"sourceRoot":"src/components/global/configbuilder"}]}